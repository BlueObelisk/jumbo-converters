<transformList>
  
  <!-- Process basis sets -->
 
 <!--  Move basis module to cml:list -->
 <transform process="rename" 
xpath=".//cml:module[@cmlx:templateRef='basis']"
elementName="cml:list"
id="basis_set" 
dictRef="compchem:basis_set"
/> 

<!-- Use title, harmonic_type and label (description?) from summary -->


<!-- Get the title from the summarybasis block
NB: This assume the same basis on all atoms! Need to add code
to check if these are different.
-->
<transform process="addChild"
xpath=".//cml:list[@dictRef='compchem:basis_set']"
elementName="cml:scalar"
id="basis_set_title"
dictRef="compchem:basis_set_title"
position="0"
value="$string(../../cml:module[@cmlx:templateRef='summarybasis']/cml:list[@cmlx:templateRef='basis_contractions']//cml:scalar[@dictRef='compchem:basis_set_title'])"
/>

<!-- basis_set_type is hard-wired for the time being -->
<transform process="addChild"
xpath=".//cml:list[@dictRef='compchem:basis_set']"
elementName="cml:scalar"
id="basis_set_type"
dictRef="compchem:basis_set_type"
position="1"
value="orbital"
/>

<!-- Set harmonic_type from summary -->
<transform process="addChild"
xpath=".//cml:list[@dictRef='compchem:basis_set']"
elementName="cml:scalar"
id="basis_set_harmonic_type"
dictRef="compchem:basis_set_harmonic_type"
position="2"
value="$string(../../cml:module[@cmlx:templateRef='summarybasis']/cml:list[@cmlx:templateRef='basis_summary']//cml:scalar[@dictRef='compchem:basis_set_harmonic_type'])"
/>

<!-- basis_set_contraction_type hard-wired to general for the time being -->
<transform process="addChild"
xpath=".//cml:list[@dictRef='compchem:basis_set']"
elementName="cml:scalar"
id="basis_set_contraction_type"
dictRef="compchem:basis_set_contraction_type"
position="3"
value="general"
/>

<!-- Use nwchem basis type as description -->
<transform process="addChild"
xpath=".//cml:list[@dictRef='compchem:basis_set']"
elementName="cml:scalar"
id="basis_set_description"
dictRef="compchem:basis_set_description"
position="4"
value="$string(../cml:list[@cmlx:templateRef='basis.title']/cml:scalar[@dictRef='n:basis_set_label'])"
/>
 
 <!-- Can now delete the basis.title module -->
 <transform process="delete" 
 xpath=".//cml:list[@dictRef='compchem:basis_set']/cml:list[@cmlx:templateRef='basis.title']"
 />
 
<!-- <transform process="createWrapperParameter"
xpath=".//cml:scalar[@id='basisset_title']"
/> -->

</transformList>
