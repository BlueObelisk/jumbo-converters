<template id="l101" name="l101" repeat="*"
    pattern="\s*Symbolic Z-matrix\:\s*" 
    endPattern="\s*" endOffset="1"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    >
    
  <comment class="example.input" id="l101">
 Symbolic Z-matrix:
 Charge =  0 Multiplicity = 1
 C
 H                    1    B1
 H                    1    B2       2    A1
 H                    1    B3       2    A2       3    D1       0
 H                    1    B4       2    A3       3    D2       0
       Variables:
  B1                    1.113                    
  B2                    1.113                    
  B3                    1.113                    
  B4                    1.113                    
  A1                  109.47124                  
  A2                  109.47119                  
  D1                  120.                       
  A3                  109.47123                  
  D2                 -120.                       
 
     3 tetrahedral angles replaced.
  </comment>

  <templateList>
    <xi:include href="l101.zmatvariables.xml"/>
    <xi:include href="l101.zmat.xml"/>
    <xi:include href="l101.redundantcoords.xml"/>
    <xi:include href="l101.zmatcommas.xml"/>
    
    <!-- <xi:include href="l101.tetrahedral.xml"/> -->
   
  </templateList>  
  
  <record repeat="*" id="rest">{X,x:l101}</record>

  <transform process="createWrapper" xpath="./text()" elementName="UNPARSED" />

  <!-- CLEAN UP -->
  <transform process="delete" xpath=".//cml:list[count(*)=0]" />
  <transform process="delete" xpath=".//UNPARSED/cml:array[count(text())=0]" />
  <transform process="delete" xpath=".//UNPARSED[count(*)=0]" />

  <comment class="example.output" id="l101">
  <module cmlx:templateRef="l101" xmlns="http://www.xml-cml.org/schema" xmlns:cmlx="http://www.xml-cml.org/schema/cmlx">
    <module cmlx:lineCount="17" cmlx:templateRef="l101.zmatvariables">
      <map id="variableMap">
        <link from="B1" to="1.113"/>
        <link from="B2" to="1.113"/>
        <link from="B3" to="1.113"/>
        <link from="B4" to="1.113"/>
        <link from="A1" to="109.47124"/>
        <link from="A2" to="109.47119"/>
        <link from="D1" to="120.0"/>
        <link from="A3" to="109.47123"/>
        <link from="D2" to="-120.0"/>
      </map>
      <molecule formalCharge="0" id="zinitial" spinMultiplicity="1">
        <zMatrix>
          <length atomRefs2="a1 a2">1.113</length>
          <length atomRefs2="a1 a3">1.113</length>
          <angle atomRefs3="a2 a1 a3">109.47124</angle>
          <length atomRefs2="a1 a4">1.113</length>
          <angle atomRefs3="a2 a1 a4">109.47119</angle>
          <torsion atomRefs4="a3 a2 a1 a4">120.0</torsion>
          <length atomRefs2="a1 a5">1.113</length>
          <angle atomRefs3="a2 a1 a5">109.47123</angle>
          <torsion atomRefs4="a3 a2 a1 a5">-120.0</torsion>
        </zMatrix>
        <atomArray>
          <atom elementType="C" id="a1" x3="1.113" y3="0.0" z3="0.0"/>
          <atom elementType="H" id="a2" x3="0.0" y3="0.0" z3="0.0"/>
          <atom elementType="H" id="a3" x3="1.4840003546705822" y3="1.0493463378857821" z3="0.0"/>
          <atom elementType="H" id="a4" x3="1.4839994389430116" y3="-0.524673330822134" z3="0.9087608663603304"/>
          <atom elementType="H" id="a5" x3="1.484000171525091" y3="-0.5246732013187714" z3="-0.9087606420539267"/>
        </atomArray>
      </molecule>
      <parameter dictRef="cc:charge">
        <scalar dataType="xsd:integer" units="nonSi:elementary_charge">0</scalar>
      </parameter>
      <parameter dictRef="cc:spinMultiplicity">
        <scalar dataType="xsd:integer">1</scalar>
      </parameter>
    </module>
    <UNPARSED xmlns="">
      <array xmlns="http://www.xml-cml.org/schema" dataType="xsd:string" size="4">3 tetrahedral angles replaced.</array>
    </UNPARSED>
  </module>
</comment>
</template>
 