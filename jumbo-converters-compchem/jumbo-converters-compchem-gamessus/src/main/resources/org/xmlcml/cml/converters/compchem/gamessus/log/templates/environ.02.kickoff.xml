<template id="environ.02.kickoff"
  name="Kickoff"
  repeat="*"
  newline="$"
  pattern="\s*Distributed Data Interface kickoff program.*"  offset="0"
  endPattern="\s+"                                        endOffset="0">

  <comment class="example.input" id="kickoff.1proc.1node">
 Distributed Data Interface kickoff program.
 Initiating 1 compute processes on 1 nodes to run the following command:
 /usr/local/gamess-1may2013/gamess.01.x methane_GAMESS_B3LYP_631Gd_OPT_1may2013 
  </comment>
  <comment class="example.input" id="kickoff.16proc.16node">
 Distributed Data Interface kickoff program.
 Initiating 16 compute processes on 16 nodes to run the following command:
 /gpfs/apps/GAMESS/bin//gamess.02.x PESs/B3LYP/cc-pVDZ/B3LYP_Df-15_p-15.inp 
  </comment>

  <!-- <record id="kickoff.unparsed" repeat="*">{X,x:UNPARSED}</record> -->
  <record />
  <record id="data">\s*.*\s{I,cc:numProcs}\s.*\s.*\s.*\s{I,m:numNodes}\s.*</record>
  <record id="data">\s*{X,m:command}\s*</record>
  
  <transform process="move" xpath=".//*[contains(@dictRef,'m:num') or contains(@dictRef,'m:com') or contains(@dictRef,'cc:num')]" to="." />
  <transform process="setDataType" value="xsd:string" xpath=".//*[contains(@dictRef,'m:num') or contains(@dictRef,'cc:num')]" />
  <transform process="createWrapperParameter" xpath=".//*[contains(@dictRef,'m:num') or contains(@dictRef,'m:com') or contains(@dictRef,'cc:num')]"/>

  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>
  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>

  <comment class="example.output" id="kickoff.1proc.1node">
    <module cmlx:templateRef="environ.02.kickoff" xmlns="http://www.xml-cml.org/schema" xmlns:cmlx="http://www.xml-cml.org/schema/cmlx">
        <parameter dictRef="cc:numProcs">
          <scalar dataType="xsd:string">1</scalar>
        </parameter>
        <parameter dictRef="m:numNodes">
          <scalar dataType="xsd:string">1</scalar>
        </parameter>
        <parameter dictRef="m:command">
          <scalar dataType="xsd:string">/usr/local/gamess-1may2013/gamess.01.x methane_GAMESS_B3LYP_631Gd_OPT_1may2013</scalar>
        </parameter>
    </module>
  </comment>

  <comment class="example.output" id="kickoff.16proc.16node">
    <module cmlx:templateRef="environ.02.kickoff" xmlns="http://www.xml-cml.org/schema" xmlns:cmlx="http://www.xml-cml.org/schema/cmlx">
        <parameter dictRef="cc:numProcs">
          <scalar dataType="xsd:string">16</scalar>
        </parameter>
        <parameter dictRef="m:numNodes">
          <scalar dataType="xsd:string">16</scalar>
        </parameter>
        <parameter dictRef="m:command">
          <scalar dataType="xsd:string">/gpfs/apps/GAMESS/bin//gamess.02.x PESs/B3LYP/cc-pVDZ/B3LYP_Df-15_p-15.inp</scalar>
        </parameter>
    </module>
  </comment>

</template>
