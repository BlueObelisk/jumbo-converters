<template id="coordinates.angstom"
  repeat="*"
  name="COORDINATES OF ALL ATOMS"
  pattern="\s* COORDINATES OF ALL ATOMS ARE \(ANGS\)\s*"  offset="0"
  endPattern="\s*"                                     endOffset="0" >

  <comment class="example.input" id="coordinates">
 COORDINATES OF ALL ATOMS ARE (ANGS)
   ATOM   CHARGE       X              Y              Z
 ------------------------------------------------------------
 C           6.0   0.0000000207   0.0000000242   0.0000001057
 H           1.0  -0.0000000394  -0.8928898864  -0.6312411128
 H           1.0  -0.0000000397   0.8928899116  -0.6312411667
 H           1.0  -0.8928901424  -0.0000000246   0.6312410377
 H           1.0   0.8928902008  -0.0000000248   0.6312411362
  </comment>



  <record repeat="3" />
  <record repeat="*" makeArray="true" id="atom">\s{A6,n:label}{F,c:elementType}\s{F,m:x3}\s{F,m:y3}\s{F,m:z3}.*</record>

  <transform process="createMolecule"
                  xpath="./cml:list[@cmlx:templateRef='atom']/cml:array" id="mol.input.card"/>
  <transform process="pullupSingleton"
                  xpath=".//cml:list[@cmlx:templateRef='atom']" />

  <!-- Delete empty lists -->
  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>
  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>



  <comment class="example.output" id="coordinates">
    <module cmlx:templateRef="coordinates.angstom" xmlns="http://www.xml-cml.org/schema" xmlns:cmlx="http://www.xml-cml.org/schema/cmlx">
      <molecule id="mol.input.card" cmlx:templateRef="atom">
        <atomArray>
          <atom id="a1" elementType="C" x3="2.07E-8" y3="2.42E-8" z3="1.057E-7">
            <scalar dataType="xsd:integer" dictRef="cc:atomicNumber">6</scalar>
          </atom>
          <atom id="a2" elementType="H" x3="-3.94E-8" y3="-0.8928898864" z3="-0.6312411128">
            <scalar dataType="xsd:integer" dictRef="cc:atomicNumber">1</scalar>
          </atom>
          <atom id="a3" elementType="H" x3="-3.97E-8" y3="0.8928899116" z3="-0.6312411667">
            <scalar dataType="xsd:integer" dictRef="cc:atomicNumber">1</scalar>
          </atom>
          <atom id="a4" elementType="H" x3="-0.8928901424" y3="-2.46E-8" z3="0.6312410377">
            <scalar dataType="xsd:integer" dictRef="cc:atomicNumber">1</scalar>
          </atom>
          <atom id="a5" elementType="H" x3="0.8928902008" y3="-2.48E-8" z3="0.6312411362">
            <scalar dataType="xsd:integer" dictRef="cc:atomicNumber">1</scalar>
          </atom>
        </atomArray>
        <formula formalCharge="0" concise="C 1 H 4">
          <atomArray elementType="C H" count="1.0 4.0" />
        </formula>
        <bondArray>
          <bond atomRefs2="a1 a2" id="a1_a2" order="S" />
          <bond atomRefs2="a1 a3" id="a1_a3" order="S" />
          <bond atomRefs2="a1 a4" id="a1_a4" order="S" />
          <bond atomRefs2="a1 a5" id="a1_a5" order="S" />
        </bondArray>
        <property dictRef="cml:molmass">
          <scalar xmlns:unit="http://www.xml-cml.org/unit/si/" dataType="xsd:double" units="unit:dalton">16.04246</scalar>
        </property>
      </molecule>
    </module>
  </comment>

</template>
