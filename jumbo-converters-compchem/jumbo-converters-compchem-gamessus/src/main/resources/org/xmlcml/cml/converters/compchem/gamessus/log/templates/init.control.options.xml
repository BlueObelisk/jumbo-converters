<template id="init.control.options"
  repeat="*"
  name="CONTROL OPTIONS"
  newline="$"
  pattern="\s*.CONTRL OPTIONS\s*$\s*-+\s*"      offset="0"
  endPattern="\s*$"   endOffset="0" >

  <comment class="example.input" id="init.control.options">
     $CONTRL OPTIONS
     ---------------
 SCFTYP=RHF          RUNTYP=OPTIMIZE     EXETYP=RUN     
 MPLEVL=       0     CITYP =NONE         CCTYP =NONE         VBTYP =NONE    
 DFTTYP=B3LYP        TDDFT =NONE    
 MULT  =       1     ICHARG=       0     NZVAR =       0     COORD =UNIQUE  
 PP    =NONE         RELWFN=NONE         LOCAL =NONE         NUMGRD=       F
 ISPHER=      -1     NOSYM =       0     MAXIT =      30     UNITS =ANGS    
 PLTORB=       F     MOLPLT=       F     AIMPAC=       F     FRIEND=        
 NPRINT=       7     IREST =       0     GEOM  =INPUT   
 NORMF =       0     NORMP =       0     ITOL  =      20     ICUT  =       9
 INTTYP=BEST         GRDTYP=BEST         QMTTOL= 1.0E-06
  </comment>

  <!-- <record id="init.control.options.unparsed">{X,x:UNPARSED}</record> -->
  <record repeat="2" />
  <record id="typ1">\s*.*={A,m:scftyp}\s+.*={A,m:runtyp}\s+.*={A,m:exetyp}\s*</record>
  <record id="typ2">\s*.*=\s+{I,m:mplvl}\s+.*={A,m:cityp}\s+.*={A,m:cctyp}\s+.*={A,m:vbtyp}\s*</record>
  <record id="typ3">\s*.*={A,m:dfttyp}\s+.*={A,m:tddft}\s*</record>
  <record id="typ4">\s*.*=\s+{I,m:mult}\s+.*=\s+{I,m:icharg}\s+.*=\s+{I,m:nzvar}\s+.*={A,m:coord}\s*</record>
  <record id="typ5">\s*.*={A,m:pp}\s+.*={A,m:relwfn}\s+.*={A,m:local}\s+.*=\s+{A,m:numgrd}\s*</record>
  <record id="typ6">\s*.*=\s+{I,m:ispher}\s+.*=.*{I,m:nosym}\s+.*=\s+{I,m:maxit}\s+.*={A,m:units}\s*</record>
  <record id="typ7">\s*.*=\s+{A,m:pltorb}\s+.*=\s+{A,m:molplt}\s+.*=\s+{A,m:aimpac}\s+.*={X,m:friend}\s*</record>
  <record id="typ8">\s*.*=\s+{I,m:nprint}\s+.*=\s+{I,m:irest}\s+.*={A,m:geom}\s*</record>
  <record id="typ9">\s*.*=\s+{I,m:normf}\s+.*=\s+{I,m:normp}\s+.*=\s+{I,m:itol}\s+.*=\s+{I,m:icut}\s*</record>
  <record id="typ10">\s*.*={A,m:inttyp}\s+.*={A,m:grdtyp}\s+.*=\s{X,m:qmttol}\s*</record>

  <transform process="setDataType" value="xsd:double"
    xpath=".//*[@dictRef='m:qmttol']" />

  <transform process="addChild"
                 xpath="."
                 elementName="cml:list"
                 position="0"
                 dictRef="m:contrl.options" />

  <transform process="move" xpath=".//cml:scalar[@dictRef]"
                 to="cml:list[@dictRef='m:contrl.options']" />
                 

  <transform process="createWrapperParameter"
                  xpath=".//cml:list[@dictRef='m:contrl.options']"/>

  <!-- Delete empty lists -->
  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>
  <transform process="delete" xpath=".//cml:list[count(*)=0]"/>

  <comment class="example.output" id="init.control.options">
    <module cmlx:templateRef="init.control.options" xmlns="http://www.xml-cml.org/schema" xmlns:cmlx="http://www.xml-cml.org/schema/cmlx">
      <parameter dictRef="m:contrl.options">
        <list>
          <scalar dataType="xsd:string" dictRef="m:scftyp">RHF</scalar>
          <scalar dataType="xsd:string" dictRef="m:runtyp">OPTIMIZE</scalar>
          <scalar dataType="xsd:string" dictRef="m:exetyp">RUN</scalar>
          <scalar dataType="xsd:integer" dictRef="m:mplvl">0</scalar>
          <scalar dataType="xsd:string" dictRef="m:cityp">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:cctyp">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:vbtyp">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:dfttyp">B3LYP</scalar>
          <scalar dataType="xsd:string" dictRef="m:tddft">NONE</scalar>
          <scalar dataType="xsd:integer" dictRef="m:mult">1</scalar>
          <scalar dataType="xsd:integer" dictRef="m:icharg">0</scalar>
          <scalar dataType="xsd:integer" dictRef="m:nzvar">0</scalar>
          <scalar dataType="xsd:string" dictRef="m:coord">UNIQUE</scalar>
          <scalar dataType="xsd:string" dictRef="m:pp">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:relwfn">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:local">NONE</scalar>
          <scalar dataType="xsd:string" dictRef="m:numgrd">F</scalar>
          <scalar dataType="xsd:integer" dictRef="m:ispher">-1</scalar>
          <scalar dataType="xsd:integer" dictRef="m:nosym">0</scalar>
          <scalar dataType="xsd:integer" dictRef="m:maxit">30</scalar>
          <scalar dataType="xsd:string" dictRef="m:units">ANGS</scalar>
          <scalar dataType="xsd:string" dictRef="m:pltorb">F</scalar>
          <scalar dataType="xsd:string" dictRef="m:molplt">F</scalar>
          <scalar dataType="xsd:string" dictRef="m:aimpac">F</scalar>
          <scalar dataType="xsd:string" dictRef="m:friend" />
          <scalar dataType="xsd:integer" dictRef="m:nprint">7</scalar>
          <scalar dataType="xsd:integer" dictRef="m:irest">0</scalar>
          <scalar dataType="xsd:string" dictRef="m:geom">INPUT</scalar>
          <scalar dataType="xsd:integer" dictRef="m:normf">0</scalar>
          <scalar dataType="xsd:integer" dictRef="m:normp">0</scalar>
          <scalar dataType="xsd:integer" dictRef="m:itol">20</scalar>
          <scalar dataType="xsd:integer" dictRef="m:icut">9</scalar>
          <scalar dataType="xsd:string" dictRef="m:inttyp">BEST</scalar>
          <scalar dataType="xsd:string" dictRef="m:grdtyp">BEST</scalar>
          <scalar dataType="xsd:double" dictRef="m:qmttol">1.0E-6</scalar>
        </list>
      </parameter>
    </module>
  </comment>

</template>
